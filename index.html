<!DOCTYPE html> <html lang="zh-TW"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>圖片快問快答 App</title> <script src="https://cdn.tailwindcss.com"></script> <style> @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap'); body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; } .quiz-button { transition: all 0.2s ease-in-out; box-shadow: 0 4px #4b5563; } .quiz-button:active { box-shadow: 0 2px #4b5563; transform: translateY(2px); } @keyframes shake { 0%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); } 20%, 40%, 60%, 80% { transform: translateX(5px); } } .animate-shake { animation: shake 0.5s ease-in-out; } </style> </head> <body class="min-h-screen flex items-center justify-center p-4"> <div id="app" class="w-full max-w-md bg-white rounded-xl shadow-2xl p-6 md:p-8"> <h1 class="text-3xl font-bold text-center text-gray-800 mb-6 border-b pb-3"> 圖片快問快答 </h1> <!-- 工號輸入畫面 --> <div id="id-container" class="text-center"> <h2 class="text-2xl font-bold text-gray-700 mb-4">請輸入您的工號</h2> <input id="employee-id" type="number" class="border border-gray-300 rounded-lg p-3 w-full mb-4 text-center focus:ring-2 focus:ring-blue-400" placeholder="僅限數字" required /> <button onclick="startQuiz()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg"> 開始遊戲 </button> </div> <!-- Quiz 介面 --> <div id="quiz-container" class="hidden"> <div class="mb-6 rounded-lg overflow-hidden border border-gray-200 shadow-lg"> <img id="question-image" src="" alt="問題相關圖片" class="w-full h-48 object-cover bg-gray-100" onerror="this.src='https://placehold.co/600x400/ccc/333?text=圖片載入失敗';" /> </div> <p id="question-text" class="text-xl font-semibold text-gray-700 mb-4 min-h-[50px]">載入中...</p> <div class="text-sm text-gray-500 mb-6 flex justify-between"> <span id="progress-text">問題 1 / 5</span> <span id="score-text">分數: 0</span> </div> <div id="options-container" class="space-y-4"></div> </div> <!-- 結果畫面 --> <div id="result-container" class="hidden text-center"> <h2 id="final-message" class="text-3xl font-bold text-blue-600 mb-4"></h2> <p id="final-score-text" class="text-xl text-gray-700 mb-2"></p> <p id="time-spent-text" class="text-lg font-medium text-gray-600 mb-8"></p> <button onclick="resetQuiz()" class="w-full quiz-button bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg text-lg transform hover:scale-[1.02] active:scale-[0.98]"> 重新開始測驗 </button> </div> <!-- 訊息模態 --> <div id="message-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden"> <div class="bg-white p-6 rounded-xl shadow-2xl w-full max-w-xs transform scale-100 transition-transform duration-300"> <h3 id="modal-title" class="text-xl font-bold mb-3 text-gray-800"></h3> <p id="modal-message" class="text-gray-600 mb-4"></p> <button onclick="document.getElementById('message-modal').classList.add('hidden')" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 rounded-lg"> 確定 </button> </div> </div> </div> <!-- Netlify 隱藏表單 --> <form name="quiz-results" netlify netlify-honeypot="bot-field" hidden> <input type="text" name="employee_id"> <input type="text" name="score"> <input type="text" name="details"> <input type="text" name="time_spent"> <input type="text" name="timestamp"> </form> <script> function shuffleArray(array) { const newArray = [...array]; for (let i = newArray.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [newArray[i], newArray[j]] = [newArray[j], newArray[i]]; } return newArray; } const baseQuestions = [ { q: "以下照片沒有什麼缺失？", img: "https://www.ilosh.gov.tw/media/3hrj2lrs/3.jpg", opts: ["未戴安全帽", "未穿著背負式安全帶", "未穿著上衣", "施工未站立於平台"], ans: "未戴安全帽" }, { q: "以下照片沒有什麼缺失？", img: "https://www.ilosh.gov.tw/media/2tlp5l4z/4.jpg", opts: ["未戴安全帽", "未穿著背負式安全帶", "未穿著安全鞋", "無缺失"], ans: "無缺失" }, { q: "為什麼要配戴安全帽？", img: "https://cc.tvbs.com.tw/img/upload/2020/05/31/20200531113813-1404dacd.jpg", opts: ["防止頭部撞傷", "防止腳步撞傷", "防止手部撞傷", "防止膝蓋撞傷"], ans: "防止頭部撞傷" }, { q: "如果維修保養中沒有掛上告示牌，下列何者不正確？", img: "https://images.vocus.cc/f7d6c1ed-0dd9-4232-bdc8-eaf15ba6237a.png", opts: ["誤觸開關", "機台運作", "導致人員傷亡", "無任何影響"], ans: "無任何影響" }, { q: "以下何者狀況不會容易導致觸電發生？", img: "https://upload.wikimedia.org/wikipedia/commons/3/37/Electrical_outlet.jpg", opts: ["手部潮濕觸碰插座", "在浴室吹頭髮", "插座堆積灰塵", "插座定期檢測"], ans: "插座定期檢測" }, ]; const fullQuizData = []; for (let i = 0; i < 50; i++) { const base = baseQuestions[i % baseQuestions.length]; fullQuizData.push({ question: [第 ${i + 1} 題] ${base.q}, image: base.img, options: [...base.opts], answer: base.ans }); } let employeeId = null; let currentQuestionIndex = 0; let score = 0; const QUESTIONS_PER_SESSION = 5; let sessionQuestions = []; let startTime = null; let endTime = null; const quizContainer = document.getElementById('quiz-container'); const resultContainer = document.getElementById('result-container'); const questionText = document.getElementById('question-text'); const questionImage = document.getElementById('question-image'); const optionsContainer = document.getElementById('options-container'); const progressText = document.getElementById('progress-text'); const scoreText = document.getElementById('score-text'); const finalMessage = document.getElementById('final-message'); const finalScoreText = document.getElementById('final-score-text'); const timeSpentText = document.getElementById('time-spent-text'); const messageModal = document.getElementById('message-modal'); const modalTitle = document.getElementById('modal-title'); const modalMessage = document.getElementById('modal-message'); function showModal(title, message, isSuccess = true) { modalTitle.textContent = title; modalMessage.textContent = message; modalTitle.classList.toggle('text-green-600', isSuccess); modalTitle.classList.toggle('text-red-600', !isSuccess); messageModal.classList.remove('hidden'); } function startQuiz() { const input = document.getElementById('employee-id'); const idValue = input.value.trim(); if (!idValue || isNaN(idValue)) { showModal('錯誤', '請輸入有效的數字工號。', false); return; } employeeId = idValue; document.getElementById('id-container').classList.add('hidden'); resetQuiz(); } function loadQuestion() { if (currentQuestionIndex >= QUESTIONS_PER_SESSION) { showResult(); return; } const q = sessionQuestions[currentQuestionIndex]; const shuffledOptions = shuffleArray(q.options); questionText.textContent = ${currentQuestionIndex + 1}. ${q.question}; questionImage.src = q.image; progressText.textContent = 問題 ${currentQuestionIndex + 1} / ${QUESTIONS_PER_SESSION}; scoreText.textContent = 分數: ${score}; optionsContainer.innerHTML = ''; shuffledOptions.forEach(option => { const button = document.createElement('button'); button.textContent = option; button.className = 'quiz-button w-full bg-indigo-500 text-white text-lg font-semibold py-3 px-4 rounded-lg hover:bg-indigo-600 active:bg-indigo-700 shadow-lg'; button.onclick = () => checkAnswer(option, button); optionsContainer.appendChild(button); }); } function checkAnswer(selectedOption, button) { const currentQuestion = sessionQuestions[currentQuestionIndex]; const isCorrect = selectedOption === currentQuestion.answer; Array.from(optionsContainer.children).forEach(btn => btn.disabled = true); if (isCorrect) { score++; button.classList.add('bg-green-500', 'animate-pulse'); showModal('恭喜!', '答案正確! 加一分。', true); } else { button.classList.add('bg-red-500', 'animate-shake'); showModal('錯誤', 正確答案是: ${currentQuestion.answer}, false); Array.from(optionsContainer.children).forEach(btn => { if (btn.textContent === currentQuestion.answer) { btn.classList.add('bg-green-400'); } }); } setTimeout(() => { currentQuestionIndex++; loadQuestion(); }, 1200); } function formatTime(ms) { return ${(ms / 1000).toFixed(1)} 秒; } function showResult() { endTime = new Date(); const timeDiff = endTime - startTime; quizContainer.classList.add('hidden'); resultContainer.classList.remove('hidden'); const percentage = (score / QUESTIONS_PER_SESSION) * 100; let message = percentage === 100 ? '完美! 您是快問快答大師!' : percentage >= 60 ? '表現優秀! 繼續保持。' : '下次會更好! 多加練習喔。'; finalMessage.textContent = message; finalScoreText.textContent = 您的最終分數是 ${score} 題答對，共 ${QUESTIONS_PER_SESSION} 題。; timeSpentText.textContent = 總遊玩時間: ${formatTime(timeDiff)}; const form = document.forms['quiz-results']; const now = new Date().toLocaleString('zh-TW'); form.employee_id.value = employeeId; form.score.value = ${score} / ${QUESTIONS_PER_SESSION}; form.details.value = sessionQuestions.map((q, i) => ${i+1}. ${q.question} → 正解: ${q.answer}).join('\n'); form.time_spent.value = formatTime(endTime - startTime); form.timestamp.value = now; fetch("/", { method: "POST", headers: { "Content-Type": "application/x-www-form-urlencoded" }, body: new URLSearchParams(new FormData(form)).toString(), }).then(() => console.log("結果已送出到 Netlify")); } function resetQuiz() { currentQuestionIndex = 0; score = 0; const shuffledFullData = shuffleArray(fullQuizData); sessionQuestions = shuffledFullData.slice(0, QUESTIONS_PER_SESSION); startTime = new Date(); quizContainer.classList.remove('hidden'); resultContainer.classList.add('hidden'); loadQuestion(); } </script> </body> </html>
